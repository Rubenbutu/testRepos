(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b58ec59"],{"0d03":function(e,t,n){var r=n("6eeb"),a=Date.prototype,s="Invalid Date",i="toString",o=a[i],c=a.getTime;new Date(NaN)+""!=s&&r(a,i,(function(){var e=c.call(this);return e===e?o.call(this):s}))},1276:function(e,t,n){"use strict";var r=n("d784"),a=n("44e7"),s=n("825a"),i=n("1d80"),o=n("4840"),c=n("8aa5"),l=n("50c4"),u=n("14c3"),d=n("9263"),p=n("d039"),g=[].push,m=Math.min,f=4294967295,h=!p((function(){return!RegExp(f,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(i(this)),s=void 0===n?f:n>>>0;if(0===s)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,s);var o,c,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,h=new RegExp(e.source,p+"g");while(o=d.call(h,r)){if(c=h.lastIndex,c>m&&(u.push(r.slice(m,o.index)),o.length>1&&o.index<r.length&&g.apply(u,o.slice(1)),l=o[0].length,m=c,u.length>=s))break;h.lastIndex===o.index&&h.lastIndex++}return m===r.length?!l&&h.test("")||u.push(""):u.push(r.slice(m)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=i(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var d=s(e),p=String(this),g=o(d,RegExp),v=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),_=new g(h?d:"^(?:"+d.source+")",b),y=void 0===a?f:a>>>0;if(0===y)return[];if(0===p.length)return null===u(_,p)?[p]:[];var x=0,w=0,C=[];while(w<p.length){_.lastIndex=h?w:0;var S,I=u(_,h?p:p.slice(w));if(null===I||(S=m(l(_.lastIndex+(h?0:w)),p.length))===x)w=c(p,w,v);else{if(C.push(p.slice(x,w)),C.length===y)return C;for(var O=1;O<=I.length-1;O++)if(C.push(I[O]),C.length===y)return C;w=x=S}}return C.push(p.slice(x)),C}]}),!h)},"16f1":function(e,t,n){n("5145"),n("3e47"),e.exports=n("d9f3")},"22a7":function(e,t,n){},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),s=n("d039"),i=n("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&r(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?i.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"42bc":function(e,t,n){"use strict";n("99af"),n("7db0"),n("fb6a"),n("0d03"),n("d3b7"),n("acd8"),n("e25e"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("498a");var r=n("284c"),a=n("1316"),s=n.n(a);function i(e){if(s()(e))return e}var o=n("898c"),c=n.n(o),l=n("2dc0"),u=n.n(l);function d(e,t){if(u()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=c()(e);!(r=(i=o.next()).done);r=!0)if(n.push(i.value),t&&n.length===t)break}catch(l){a=!0,s=l}finally{try{r||null==o["return"]||o["return"]()}finally{if(a)throw s}}return n}}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(e,t){return i(e)||d(e,t)||p()}function m(e){return void 0==e?"undefined":e.toLocaleString()}function f(e){return e=e.toString(),e.length<=1?"0"+e:e}function v(e){return e?(e=new Date(e),"".concat(e.getFullYear(),"-").concat(f(e.getMonth()+1),"-").concat(f(e.getDate()))):"-- Date Invalide --"}function b(e){return e?(e=new Date(e),"".concat(e.getFullYear(),"-").concat(f(e.getMonth()+1),"-").concat(f(e.getDate())," ").concat(f(e.getHours()),":").concat(f(e.getMinutes()),":").concat(f(e.getSeconds()))):"-- Date Invalide --"}function _(e){return b(e)}function y(e){var t=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CDF",minimumFractionDigits:2}),n=t.format(e),r=n.replace("CDF","");return r=r.trim(),r}function x(e){var t=new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit"});return t}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Le",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"à",r=new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),a=r.split(" ");return t+" "+a[0]+" "+n+" "+a[1]}function C(e){var t=e,n=new Date("12/31/".concat(t.getFullYear())),r=parseInt((n-t)/864e5,10)+1;return r}function S(e){var t=new Date("01/01/".concat(e)),n=new Date("12/31/".concat(e)),r=parseInt((n-t)/864e5,10)+1;return r}function I(e,t){var n=g(e,2),r=n[0],a=n[1],s=g(t,2),i=s[0],o=s[1],c=function(e,t){return e<=t?e:t},l=function(e,t){return e>=t?e:t},u=l(r,i)<=c(a,o);return u}function O(e,t){if(e.codeBoite&&""!=e.codeBoite){var n=t.find((function(t){return t.codeBoite==e.codeBoite}));return n?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",n.designation," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-warning-light"}},["Boîte d 'Archivage "])," "]):e.codeBoite}return"1"==e.estAgent?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",e.nomPossesseur+" (Matricule "+e.matriculeAgent+")"," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-info-light"}},[" Agent "])," "]):"0"==e.estAgent?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",e.nomPossesseur," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-secondary-light"}},["Personne tierce "])," "]):void 0}function R(e,t){if(e.codeRayon){var n=t.find((function(t){return t.codeRayon==e.codeRayon}));return n?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",n.designation+" ( Travée "+e.etagere+" )"," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-warning-light"}},[" Rayonnage "])," "]):e.codeRayon}return"1"==e.estAgent?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",e.nomPossesseur+" (Matricule "+e.matriculeAgent+")"," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-info-light"}},[" Agent "])," "]):"0"==e.estAgent?h("p",{attrs:{className:"my-0 py-0"}},[h("span",{attrs:{className:"me-3"}},[" ",e.nomPossesseur," "])," ",h("span",{attrs:{className:"my-0 badge bg-pill bg-secondary-light"}},["Personne tierce "])," "]):void 0}function k(e,t){e||(e=JSON.parse(sessionStorage.utilisateur).codeStructure.substr(0,6)+"0000");var n=t.find((function(t){return t.CodeStructure==e}));return n?n["Libellé"]:e}function A(e){var t=e.montantMax,n=e.montantMin,r="";return 0==t&&n>0?r="Supérieur ou égale à "+y(n):t>0&&0==n?r="Inférieur ou égale à "+y(t):t>0&&n>0&&(r="Compris entre "+y(n)+" et "+y(t)),r}var E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ; ",n="";for(var r in e)n+=e[r].toString(),r<e.length-1&&(n+=t);return n};function D(e){var t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}function N(e){var t=parseFloat(e);return"NaN"!=t.toString()}function j(e){var t=e.split("-");return 3==t.length&&(!(4!=t[0].toString().length||!N(t[0]))&&(!(0==t[1].toString().length||t[1].toString().length>2||!N(t[1])||parseFloat(t[1])<1||parseFloat(t[1])>12)&&!(0==t[2].toString().length||t[2].toString().length>2||!N(t[2])||parseFloat(t[2])<1||parseFloat(t[2])>31)))}function $(e){var t=e.split(":");return(2==t.length||3==t.length)&&(!(!N(t[0])||parseInt(t[0])<0||parseInt(t[0])>23)&&(!(!N(t[1])||parseInt(t[1])<0||parseInt(t[1])>59)&&(3!=t.length||!(!N(t[2])||parseInt(t[2])<0||parseInt(t[2])>59))))}function P(e){var t=[];while(e.length>0){var n=parseInt(Math.random()*e.length);n>=e.length&&(n=e.length-1),t.push(e[n]),e=[].concat(Object(r["a"])(e.slice(0,n)),Object(r["a"])(e.slice(n+1)))}return t}function F(e){var t=e.split(":");return t.length>=2?t[0]+":"+t[1]:e}t["a"]={addSpacesToNumer:m,isCorrectISOTime:$,getISOString:v,obtenirFormatMonetaire:y,getShortTime:F,obtenirDateEnFrancaisCourt:x,obtenirNombreDesJoursParAnnee:S,obtenirNombreDesJoursConsommes:C,isDatesChevauching:I,getComponentLocalisationDossier:O,getComponentLocalisationBoite:R,getLibelleService:k,getDescriptionMontant:A,concatList:E,isValidEmail:D,getISOStringWithTime:_,obtenirDateEtHeureEnFrancais:w,getISODateTimeString:b,isCorrectNumber:N,isCorrectISODate:j,melangerTableau:P}},"44e7":function(e,t,n){var r=n("861d"),a=n("c6b6"),s=n("b622"),i=s("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},"498a":function(e,t,n){"use strict";var r=n("23e7"),a=n("58a8").trim,s=n("e070");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),s="["+a+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5bd6":function(e,t,n){},"6fe5":function(e,t,n){var r=n("da84"),a=n("58a8").trim,s=n("5899"),i=r.parseFloat,o=1/i(s+"-0")!==-1/0;e.exports=o?function(e){var t=a(String(e)),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},"898c":function(e,t,n){e.exports=n("16f1")},9958:function(e,t,n){"use strict";var r=n("5bd6"),a=n.n(r);a.a},acd8:function(e,t,n){var r=n("23e7"),a=n("6fe5");r({global:!0,forced:parseFloat!=a},{parseFloat:a})},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,s=Function.prototype,i=s.toString,o=/^\s*function ([^ (]*)/,c="name";!r||c in s||a(s,c,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},b940:function(e,t,n){"use strict";var r=n("22a7"),a=n.n(r);a.a},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,s=n("44d2"),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},d869:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("agent-component",{attrs:{add_mode:!0}})},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"news-grid mt-5"},[n("div",{staticClass:"page-header"},[n("h3",{staticClass:"page-title"},[e._v(" "+e._s(e.add_mode?"Enregistrer un agent":"Editer les informations sur une Article")+" ")]),n("nav",{attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},[n("li",{staticClass:"breadcrumb-item"},[n("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Saisie de données")])],1),n("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v(" "+e._s(e.add_mode?"Enregistrer un agent":"Editer les informations sur un Article")+" ")])])])]),e.is_loading_naissances?n("div",{staticClass:"mt-5 pt-4"},[e._m(0)]):e.is_loading_naissances?e._e():n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"col-md-12"},[e.is_doing_action?n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"circle-loader"}),n("p",{staticClass:"text-center mt-4"},[e._v(e._s(e.loading_message))])])]):e._e(),n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-7"},[n("fieldset",{staticClass:"mt-4",attrs:{disabled:e.is_doing_action}},[n("b-form-group",{attrs:{label:"Nom  :","label-for":"nom"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"text",id:"nom",placeholder:"Nom"},model:{value:e.agent.nom,callback:function(t){e.$set(e.agent,"nom",t)},expression:"agent.nom"}})],1),n("b-form-group",{attrs:{label:"Postnom  :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Postnom "},model:{value:e.agent.postnom,callback:function(t){e.$set(e.agent,"postnom",t)},expression:"agent.postnom"}})],1),n("b-form-group",{attrs:{label:"Prénom  :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Postnom "},model:{value:e.agent.prenom,callback:function(t){e.$set(e.agent,"prenom",t)},expression:"agent.prenom"}})],1),n("b-form-group",{attrs:{label:"Sexe :","label-for":"sexe_defun"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.agent.sexe,expression:"agent.sexe"}],staticClass:"form-control",attrs:{id:"sexe"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.agent,"sexe",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:"Masculin"}},[e._v("Masculin")]),n("option",{domProps:{value:"Feminin"}},[e._v("Féminin")])])]),n("b-form-group",{attrs:{label:"Email :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"email",placeholder:"Email"},model:{value:e.agent.email,callback:function(t){e.$set(e.agent,"email",t)},expression:"agent.email"}})],1),n("b-form-group",{attrs:{label:"Mot de passe  :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"password",placeholder:"Mot de passe "},model:{value:e.agent.password,callback:function(t){e.$set(e.agent,"password",t)},expression:"agent.password"}})],1),n("b-form-group",{attrs:{label:"Confirmer le mot de passe  :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"password",placeholder:"Confirmer le Mot de passe "},model:{value:e.agent.conf_password,callback:function(t){e.$set(e.agent,"conf_password",t)},expression:"agent.conf_password"}})],1),n("b-form-group",{attrs:{label:"Adresse :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Adresse "},model:{value:e.agent.adresse,callback:function(t){e.$set(e.agent,"adresse",t)},expression:"agent.adresse"}})],1),n("b-form-group",{attrs:{label:"Téléphone :"}},[n("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Téléphone"},model:{value:e.agent.phone,callback:function(t){e.$set(e.agent,"phone",t)},expression:"agent.phone"}})],1),n("b-button",{staticClass:"mr-2 mt-4",attrs:{type:"submit",disabled:e.is_doing_action,variant:"success"},on:{click:function(t){e.add_mode?e.doAddAgent():e.doEditArticle()}}},[e._v(e._s(e.add_mode?"Enregistrer l'agent":"Enregistrer les modifications apportées"))])],1)])])])])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"circle-loader"}),n("p",{staticClass:"text-center mt-4"},[e._v("Chargement de données en cours")])])])}],o=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("c740"),n("4160"),n("c975"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("159b"),n("284c")),c=(n("96cf"),n("89ba")),l=n("2fa7"),u=n("42bc"),d=n("1503");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={props:{add_mode:{type:Boolean,required:!0}},methods:g({},u["a"],{verifierChargement:function(){this.nbr_charges+=1,this.nbr_charges==this.nbr_total_chargements&&(this.is_loading_naissances=!1)},loadArticle:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.constants.api_url+"/naissances/get.php?id_naissance="+encodeURIComponent(this.$route.params.id_naissance),n=null,e.prev=2,r=new Headers,r.append("Content-type","application/x-www-form-urlencoded"),e.next=7,fetch(t,{method:"get",cache:"no-cache",headers:r});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 14:return e.next=16,n.json();case 16:a=e.sent,"SUCCESS"==a.status&&a.agent?this.agent=g({},a.agent):this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+a.status+"<br/>Message : "+a.message});case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}(),loadCollections:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.constants.api_url+"/collections/get.php",n=null,e.prev=2,r=new Headers,r.append("Content-type","application/x-www-form-urlencoded"),e.next=7,fetch(t,{method:"get",cache:"no-cache",headers:r});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 14:return e.next=16,n.json();case 16:a=e.sent,"SUCCESS"==a.status&&a.collections?this.listCollections=a.collections:this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+a.status+"<br/>Message : "+a.message});case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}(),onImageAdded:function(e){this.agent.images=[].concat(Object(o["a"])(this.agent.images),[e])},onImageUpdated:function(e){var t=this.agent.images.findIndex((function(t){return t.id_image==e.id_image}));t>=0&&(this.agent.images[t]=e)},onImageDeleted:function(e){this.agent.images=this.agent.images.filter((function(t){return t.id_image!=e.id_image}))},verifierAgent:function(e){var t="";return void 0==e.nom||""==e.nom?t="Veuillez entrer un nom correcte svp":void 0==e.postnom||""==e.postnom?t="Veuillez entrer un postnom correcte svp":void 0==e.prenom||""==e.prenom?t="Veuillez entrer un prénom correcte svp":void 0==e.sexe||""==e.sexe?t="Veuillez sélectionner un sexe svp":void 0==e.phone||""==e.phone?t="Veuillez entrer un numéro de téléphone correcte svp":void 0==e.email||""==e.email?t="Veuillez entrer une adresse email correcte svp":void 0==e.password||e.password.length<5?t="Veuillez entrer un mot de passe ayant au moins 5 caractères":e.password!==e.conf_password?t="Les deux mots de passe ne concordent pas":void 0!=e.type&&""!=e.type||(t="Veuillez sélectionner un type de compte"),""!=t&&this.$swal({type:"warning",title:"Les données fournies sont incorrcetes",text:t}),{status:""===t,message:t}},doAddAgent:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.verifierAgent(this.agent).status){e.next=2;break}return e.abrupt("return");case 2:return this.loading_message="Enregistrement du decès  en cours",this.is_doing_action=!0,t=this.constants.api_url+"/users/",n=null,r=g({},this.agent,{service_id:this.utilisateur.service_id}),delete r.conf_password,e.prev=8,a=new Headers,a.append("Content-type","application/x-www-form-urlencoded"),e.next=13,fetch(t,{method:"post",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 13:n=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e["catch"](8),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 20:return e.next=22,n.json();case 22:s=e.sent,s.success?(this.agent=this.default_naissance,this.$snotify.success("L'agent a été enregistré avec succès.",{timeout:1500,showProgressBar:!1,closeOnClick:!1,pauseOnHover:!0})):this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+s.status+"<br/>Message : "+s.message}),this.is_doing_action=!1;case 25:case"end":return e.stop()}}),e,this,[[8,16]])})));function t(){return e.apply(this,arguments)}return t}(),doEditArticle:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.verifierAgent(this.agent).status){e.next=2;break}return e.abrupt("return");case 2:return this.loading_message="Enregistrement des modifications  en cours",this.is_doing_action=!0,t=this.constants.api_url+"/naissances/edit.php/",n=null,e.prev=6,r=new Headers,r.append("Content-type","application/x-www-form-urlencoded"),e.next=11,fetch(t,{method:"post",cache:"no-cache",credentials:"include",headers:r,body:"id_naissance="+encodeURIComponent(this.$route.params.id_naissance)+"&nom="+encodeURIComponent(this.agent.nom)+"&collection_id="+encodeURIComponent(this.agent.collection_id)+"&prix_unitaire="+encodeURIComponent(this.agent.prix_unitaire)+"&est_en_promotion="+encodeURIComponent(this.agent.est_en_promotion)+"&prix_barre="+encodeURIComponent(this.agent.prix_barre)+"&est_disponible="+encodeURIComponent(this.agent.est_disponible)+"&est_nouveau="+encodeURIComponent(this.agent.est_nouveau)+"&description="+encodeURIComponent(this.agent.description)});case 11:n=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e["catch"](6),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 18:return e.next=20,n.json();case 20:if(a=e.sent,"SUCCESS"!=a.status){e.next=35;break}if(s="",!this.ifile){e.next=28;break}return e.next=26,this.doUpdateProfilImage(this.$route.params.id_naissance);case 26:i=e.sent,"SUCCESS"==i.status?s="La mise à jour du profile a été effectué avec succès":0==i.status&&(s="La mise à jour de l'image a renvoyé un erreur : "+i.status);case 28:this.agent=this.default_naissance,this.deleteImage(),""!=s&&this.$snotify.info(s,{timeout:1500,showProgressBar:!1,closeOnClick:!1,pauseOnHover:!0}),this.$snotify.success("L'agent a été modifé avec succès.",{timeout:1500,showProgressBar:!1,closeOnClick:!1,pauseOnHover:!0}),this.$router.push("/admin/naissances"),e.next=36;break;case 35:this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+a.status+"<br/>Message : "+a.message});case 36:this.is_doing_action=!1;case 37:case"end":return e.stop()}}),e,this,[[6,14]])})));function t(){return e.apply(this,arguments)}return t}(),doUpdateProfilImage:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.profile_image_changed||!this.ifile){e.next=20;break}return this.loading_message="Mise à jour de l'image en cours",n=this.constants.api_url+"/naissances/change-image.php?id_naissance="+t,r=new FormData,r.append("img",this.ifile,this.ifile.name),a=new Headers,a.append("Content-type","application/x-www-form-urlencoded"),e.next=9,fetch(n,{method:"post",body:r,credentials:"include",cache:"no-cache"});case 9:return s=e.sent,e.next=12,s.json();case 12:if(i=e.sent,"SUCCESS"!=i.status){e.next=17;break}return e.abrupt("return",{status:"SUCCESS"});case 17:return e.abrupt("return",i);case 18:e.next=21;break;case 20:return e.abrupt("return",{status:"NO_CHANGE"});case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onProfilImageChange:function(e){var t=this,n=e.target.files[0];if(this.filename="",this.preview_img=null,this.preview_img_base64="",this.ifile=null,n){var r=new FileReader;r.onload=function(){t.img_profil=r.result;var e=r.result.substr(r.result.indexOf(",")+1,r.result.length-(r.result.indexOf(",")+1));t.filename=n.name,t.ifile=n,t.preview_img=t.img_profil,t.preview_img_base64=e,t.profile_image_changed=!0},r.readAsDataURL(n)}},deleteImage:function(){this.filename="",this.preview_img=null,this.preview_img_base64="",this.ifile=null,this.profile_image_changed=!0},getImgObjModel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{description:r,id_naissance:e,code_contexte:"IMG_JOUEUR",nom_fichier:t,id_image:n}}}),created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{this.utilisateur=JSON.parse(sessionStorage.getItem("utilisateur"))}catch(n){this.utilisateur={id:-1}}this.add_mode||(this.nbr_total_chargements+=1,this.is_loading_naissances=!0,this.loadArticle().then((function(){return t.verifierChargement()}))),this.loadCollections().then((function(){return t.verifierChargement()}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{constants:d["a"],nbr_total_chargements:1,nbr_charges:0,sortBy:" ",perPage:10,currentPage:1,sortDesc:!1,sortByFormatted:!0,filterByFormatted:!0,sortable:!0,mouvements_naissance:[],fields:[{key:"date_mouvement",sortable:!0},{key:"etat_naissance",sortable:!1},{key:"observation",sortable:!0}],is_loading_naissances:!1,is_doing_action:!1,listCollections:[],agent:{nom:"",postnom:"",prenom:"",sexe:"",adresse:"",email:"",phone:"",password:"",conf_password:"",type:"Agent",status:"1",service_id:-1},default_naissance:{nom:"",postnom:"",prenom:"",sexe:"",adresse:"",email:"",phone:"",password:"",conf_password:"",type:"Agent",status:"1",service_id:-1},utilisateur:{},loading_message:"Chargement de données en cours",filename:"",preview_img:null,preview_img_base64:"",ifile:null,img_profil:null,profile_image_changed:!1}},components:{}},f=m,h=(n("b940"),n("2877")),v=Object(h["a"])(f,s,i,!1,null,"6e3d574f",null),b=v.exports,_={props:{},components:{AgentComponent:b}},y=_,x=(n("9958"),Object(h["a"])(y,r,a,!1,null,"6ffcd4ea",null));t["default"]=x.exports},d9f3:function(e,t,n){var r=n("6f8d"),a=n("0b7b");e.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},e01a:function(e,t,n){"use strict";var r=n("23e7"),a=n("83ab"),s=n("da84"),i=n("5135"),o=n("861d"),c=n("9bf2").f,l=n("e893"),u=s.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(p,u);var g=p.prototype=u.prototype;g.constructor=p;var m=g.toString,f="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(g,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=m.call(e);if(i(d,e))return"";var n=f?t.slice(7,-1):t.replace(h,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},e070:function(e,t,n){var r=n("d039"),a=n("5899"),s="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||s[e]()!=s||a[e].name!==e}))}},e25e:function(e,t,n){var r=n("23e7"),a=n("e583");r({global:!0,forced:parseInt!=a},{parseInt:a})},e583:function(e,t,n){var r=n("da84"),a=n("58a8").trim,s=n("5899"),i=r.parseInt,o=/^[+-]?0[Xx]/,c=8!==i(s+"08")||22!==i(s+"0x16");e.exports=c?function(e,t){var n=a(String(e));return i(n,t>>>0||(o.test(n)?16:10))}:i},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),s=n("e8b5"),i=n("23cb"),o=n("50c4"),c=n("fc6a"),l=n("8418"),u=n("1dde"),d=n("b622"),p=d("species"),g=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!u("slice")},{slice:function(e,t){var n,r,u,d=c(this),f=o(d.length),h=i(e,f),v=i(void 0===t?f:t,f);if(s(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?a(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(d,h,v);for(r=new(void 0===n?Array:n)(m(v-h,0)),u=0;h<v;h++,u++)h in d&&l(r,u,d[h]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-5b58ec59.9efc4ff4.js.map