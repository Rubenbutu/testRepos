(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bbb933b"],{2007:function(e,a,t){"use strict";var s=t("c990"),n=t.n(s);n.a},a524:function(e,a,t){"use strict";var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{staticClass:"news-grid mt-5"},[t("div",{staticClass:"page-header"},[t("h3",{staticClass:"page-title"},[e._v(" "+e._s(e.add_mode?"Enregistrer une naissance":"Editer les informations sur une Article")+" ")]),t("nav",{attrs:{"aria-label":"breadcrumb"}},[t("ol",{staticClass:"breadcrumb"},[t("li",{staticClass:"breadcrumb-item"},[t("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Saisie de données")])],1),t("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v(" "+e._s(e.add_mode?"Enregistrer une naissance":"Editer les informations sur un Article")+" ")])])])]),e.is_loading_naissances?t("div",{staticClass:"mt-5 pt-4"},[e._m(0)]):e.is_loading_naissances?e._e():t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-md-12"},[e.is_doing_action?t("div",{staticClass:"card mb-3"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"circle-loader"}),t("p",{staticClass:"text-center mt-4"},[e._v(e._s(e.loading_message))])])]):e._e(),t("div",{staticClass:"card mb-4"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-7"},[t("fieldset",{staticClass:"mt-4",attrs:{disabled:e.is_doing_action}},[t("b-form-group",{attrs:{label:"Nom  :","label-for":"nom"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",id:"nom",placeholder:"Nom"},model:{value:e.naissance.nom,callback:function(a){e.$set(e.naissance,"nom",a)},expression:"naissance.nom"}})],1),t("b-form-group",{attrs:{label:"Postnom  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Postnom "},model:{value:e.naissance.postnom,callback:function(a){e.$set(e.naissance,"postnom",a)},expression:"naissance.postnom"}})],1),t("b-form-group",{attrs:{label:"Prénom  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Postnom "},model:{value:e.naissance.prenom,callback:function(a){e.$set(e.naissance,"prenom",a)},expression:"naissance.prenom"}})],1),t("b-form-group",{attrs:{label:"Sexe :","label-for":"sexe_defun"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.naissance.sexe,expression:"naissance.sexe"}],staticClass:"form-control",attrs:{id:"sexe"},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.naissance,"sexe",a.target.multiple?t:t[0])}}},[t("option",{domProps:{value:"Masculin"}},[e._v("Masculin")]),t("option",{domProps:{value:"Feminin"}},[e._v("Féminin")])])]),t("b-form-group",{attrs:{label:"Date de naissance   :","label-for":"date_naissance_"}},[t("date-picker",{attrs:{valueType:"format",placeholder:"Date de naissance  "},model:{value:e.naissance.date_naissance,callback:function(a){e.$set(e.naissance,"date_naissance",a)},expression:"naissance.date_naissance"}})],1),t("b-form-group",{attrs:{label:"Nom du père  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Nom du père "},model:{value:e.naissance.nom_pere,callback:function(a){e.$set(e.naissance,"nom_pere",a)},expression:"naissance.nom_pere"}})],1),t("b-form-group",{attrs:{label:"Lieu de naissance du père  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Lieu de naissance du père "},model:{value:e.naissance.lieu_naissance_pere,callback:function(a){e.$set(e.naissance,"lieu_naissance_pere",a)},expression:"naissance.lieu_naissance_pere"}})],1),t("b-form-group",{attrs:{label:"Date de naissance du pere  :","label-for":"date_naissance"}},[t("date-picker",{attrs:{valueType:"format",placeholder:"Date de naissance du père "},model:{value:e.naissance.date_naissance_pere,callback:function(a){e.$set(e.naissance,"date_naissance_pere",a)},expression:"naissance.date_naissance_pere"}})],1),t("b-form-group",{attrs:{label:"Profession du père  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Profession du père "},model:{value:e.naissance.proffesion_pere,callback:function(a){e.$set(e.naissance,"proffesion_pere",a)},expression:"naissance.proffesion_pere"}})],1),t("b-form-group",{attrs:{label:"Nationalité du père  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Nationalité du père "},model:{value:e.naissance.nationalite_pere,callback:function(a){e.$set(e.naissance,"nationalite_pere",a)},expression:"naissance.nationalite_pere"}})],1),t("b-form-group",{attrs:{label:"Nom de la mère  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Nom de la mère "},model:{value:e.naissance.nom_mere,callback:function(a){e.$set(e.naissance,"nom_mere",a)},expression:"naissance.nom_mere"}})],1),t("b-form-group",{attrs:{label:"Lieu de naissance de la mère  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Lieu de naissance de la mère "},model:{value:e.naissance.lieu_naissance_mere,callback:function(a){e.$set(e.naissance,"lieu_naissance_mere",a)},expression:"naissance.lieu_naissance_mere"}})],1),t("b-form-group",{attrs:{label:"Date de naissance de la mère  :","label-for":"date_naissance"}},[t("date-picker",{attrs:{valueType:"format",placeholder:"Date de naissance de la mère "},model:{value:e.naissance.date_naissance_mere,callback:function(a){e.$set(e.naissance,"date_naissance_mere",a)},expression:"naissance.date_naissance_mere"}})],1),t("b-form-group",{attrs:{label:"Profession de la mère  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Profession de la mère "},model:{value:e.naissance.proffesion_mere,callback:function(a){e.$set(e.naissance,"proffesion_mere",a)},expression:"naissance.proffesion_mere"}})],1),t("b-form-group",{attrs:{label:"Nationalité de la mère  :"}},[t("b-form-input",{staticClass:"mb-3",attrs:{type:"text",placeholder:"Nationalité de la mère "},model:{value:e.naissance.nationalite_mere,callback:function(a){e.$set(e.naissance,"nationalite_mere",a)},expression:"naissance.nationalite_mere"}})],1),t("b-button",{staticClass:"mr-2 mt-4",attrs:{type:"submit",disabled:e.is_doing_action,variant:"success"},on:{click:function(a){e.add_mode?e.doAddNaissance():e.doEditNaissance()}}},[e._v(e._s(e.add_mode?"Enregistrer la naissance":"Enregistrer les modifications apportées"))])],1)])])])])])])])},n=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"circle-loader"}),t("p",{staticClass:"text-center mt-4"},[e._v("Chargement de données en cours")])])])}],r=(t("a4d3"),t("99af"),t("4de4"),t("c740"),t("4160"),t("c975"),t("b0c0"),t("e439"),t("dbb4"),t("b64b"),t("d3b7"),t("159b"),t("284c")),i=(t("96cf"),t("89ba")),o=t("2fa7"),c=t("42bc"),l=t("1503"),u=t("ec45");function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(t,!0).forEach((function(a){Object(o["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var m={props:{add_mode:{type:Boolean,required:!0}},methods:p({},c["a"],{verifierChargement:function(){this.nbr_charges+=1,this.nbr_charges==this.nbr_total_chargements&&(this.is_loading_naissances=!1)},loadNaissance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a,t,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.constants.api_url+"/naissance/"+encodeURIComponent(this.$route.params.id_naissance),t=null,e.prev=2,s=new Headers,s.append("Content-type","application/x-www-form-urlencoded"),e.next=7,fetch(a,{method:"get",cache:"no-cache",headers:s});case 7:t=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 14:return e.next=16,t.json();case 16:n=e.sent,n.id?this.naissance=p({},n):this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+n.status+"<br/>Message : "+n.message});case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));function a(){return e.apply(this,arguments)}return a}(),loadCollections:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a,t,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.constants.api_url+"/collections/get.php",t=null,e.prev=2,s=new Headers,s.append("Content-type","application/x-www-form-urlencoded"),e.next=7,fetch(a,{method:"get",cache:"no-cache",headers:s});case 7:t=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 14:return e.next=16,t.json();case 16:n=e.sent,"SUCCESS"==n.status&&n.collections?this.listCollections=n.collections:this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+n.status+"<br/>Message : "+n.message});case 18:case"end":return e.stop()}}),e,this,[[2,10]])})));function a(){return e.apply(this,arguments)}return a}(),onImageAdded:function(e){this.naissance.images=[].concat(Object(r["a"])(this.naissance.images),[e])},onImageUpdated:function(e){var a=this.naissance.images.findIndex((function(a){return a.id_image==e.id_image}));a>=0&&(this.naissance.images[a]=e)},onImageDeleted:function(e){this.naissance.images=this.naissance.images.filter((function(a){return a.id_image!=e.id_image}))},verifierNaissance:function(e){var a="";return void 0==e.nom||""==e.nom?a="Veuillez entrer un nom correcte svp":void 0==e.postnom||""==e.postnom?a="Veuillez entrer un postnom correcte svp":void 0==e.prenom||""==e.prenom?a="Veuillez entrer un prénom correcte svp":void 0==e.sexe||""==e.sexe?a="Veuillez sélectionner un sexe svp":void 0!=e.date_naissance&&""!=e.date_naissance||(a="Veuillez entrer une date de naissance correcte"),""!=a&&this.$swal({type:"warning",title:"Les données fournies sont incorrcetes",text:a}),{status:""===a,message:a}},doAddNaissance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a,t,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.verifierNaissance(this.naissance).status){e.next=2;break}return e.abrupt("return");case 2:return this.loading_message="Enregistrement du decès  en cours",this.is_doing_action=!0,a=this.constants.api_url+"/naissance/",t=null,e.prev=6,s=p({},this.naissance,{user_id:this.utilisateur.id}),delete s.id,n=new Headers,n.append("Content-type","application/x-www-form-urlencoded"),e.next=13,fetch(a,{method:"post",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(p({},s))});case 13:t=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e["catch"](6),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 20:return e.next=22,t.json();case 22:r=e.sent,r.success?(this.naissance=this.default_naissance,this.$snotify.success("La naissance a été enregistré avec succès.",{timeout:1500,showProgressBar:!1,closeOnClick:!1,pauseOnHover:!0})):this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+r.status+"<br/>Message : "+r.message}),this.is_doing_action=!1;case 25:case"end":return e.stop()}}),e,this,[[6,16]])})));function a(){return e.apply(this,arguments)}return a}(),doEditNaissance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a,t,s,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.verifierNaissance(this.naissance).status){e.next=2;break}return e.abrupt("return");case 2:return this.loading_message="Enregistrement   en cours",this.is_doing_action=!0,a=this.constants.api_url+"/naissance/"+this.naissance.id,t=null,e.prev=6,s=p({},this.naissance,{user_id:this.utilisateur.id}),delete s.id,n=new Headers,n.append("Content-type","application/x-www-form-urlencoded"),e.next=13,fetch(a,{method:"put",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(p({},s))});case 13:t=e.sent,e.next=20;break;case 16:return e.prev=16,e.t0=e["catch"](6),this.$swal({type:"error",title:"La connexion au serveur a échoué",text:e.t0.message}),e.abrupt("return");case 20:return e.next=22,t.json();case 22:r=e.sent,r.success?(this.$snotify.success("La naissance a été modifiée avec succès.",{timeout:1500,showProgressBar:!1,closeOnClick:!1,pauseOnHover:!0}),this.$router.push("/admin/naissances/liste-all-naissances")):this.$swal({type:"error",title:"Une erreur est survenue",text:"Status : "+r.status+"<br/>Message : "+r.message}),this.is_doing_action=!1;case 25:case"end":return e.stop()}}),e,this,[[6,16]])})));function a(){return e.apply(this,arguments)}return a}(),doUpdateProfilImage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var t,s,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.profile_image_changed||!this.ifile){e.next=20;break}return this.loading_message="Mise à jour de l'image en cours",t=this.constants.api_url+"/naissances/change-image.php?id_naissance="+a,s=new FormData,s.append("img",this.ifile,this.ifile.name),n=new Headers,n.append("Content-type","application/x-www-form-urlencoded"),e.next=9,fetch(t,{method:"post",body:s,credentials:"include",cache:"no-cache"});case 9:return r=e.sent,e.next=12,r.json();case 12:if(i=e.sent,"SUCCESS"!=i.status){e.next=17;break}return e.abrupt("return",{status:"SUCCESS"});case 17:return e.abrupt("return",i);case 18:e.next=21;break;case 20:return e.abrupt("return",{status:"NO_CHANGE"});case 21:case"end":return e.stop()}}),e,this)})));function a(a){return e.apply(this,arguments)}return a}(),onProfilImageChange:function(e){var a=this,t=e.target.files[0];if(this.filename="",this.preview_img=null,this.preview_img_base64="",this.ifile=null,t){var s=new FileReader;s.onload=function(){a.img_profil=s.result;var e=s.result.substr(s.result.indexOf(",")+1,s.result.length-(s.result.indexOf(",")+1));a.filename=t.name,a.ifile=t,a.preview_img=a.img_profil,a.preview_img_base64=e,a.profile_image_changed=!0},s.readAsDataURL(t)}},deleteImage:function(){this.filename="",this.preview_img=null,this.preview_img_base64="",this.ifile=null,this.profile_image_changed=!0},getImgObjModel:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{description:s,id_naissance:e,code_contexte:"IMG_JOUEUR",nom_fichier:a,id_image:t}}}),created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.add_mode||(this.nbr_total_chargements+=1,this.is_loading_naissances=!0,this.loadNaissance().then((function(){return a.verifierChargement()})));try{this.utilisateur=JSON.parse(sessionStorage.getItem("utilisateur"))}catch(t){this.utilisateur={id:-1}}case 2:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),data:function(){return{constants:l["a"],nbr_total_chargements:0,nbr_charges:0,sortBy:" ",perPage:10,currentPage:1,sortDesc:!1,sortByFormatted:!0,filterByFormatted:!0,sortable:!0,mouvements_naissance:[],fields:[{key:"date_mouvement",sortable:!0},{key:"etat_naissance",sortable:!1},{key:"observation",sortable:!0}],is_loading_naissances:!1,is_doing_action:!1,listCollections:[],naissance:{id:-1,nom:"",postnom:"",prenom:"",sexe:"",date_naissance:"",nom_pere:"",lieu_naissance_pere:"",date_naissance_pere:"",proffesion_pere:"",nationalite_pere:"",nom_mere:"",lieu_naissance_mere:"",date_naissance_mere:"",proffesion_mere:"",nationalite_mere:""},default_naissance:{id:-1,nom:"",postnom:"",prenom:"",sexe:"",pointage_naiss_normal:"",pointage_naiss_pediatrie:"",nom_pere:"",lieu_naissance_pere:"",date_naissance_pere:"",proffesion_pere:"",nationalite_pere:"",nom_mere:"",lieu_naissance_mere:"",date_naissance_mere:"",proffesion_mere:"",nationalite_mere:""},utilisateur:{},loading_message:"Chargement de données en cours",filename:"",preview_img:null,preview_img_base64:"",ifile:null,img_profil:null,profile_image_changed:!1}},components:{DatePicker:u["a"]}},_=m,f=(t("2007"),t("2877")),h=Object(f["a"])(_,s,n,!1,null,"2943506d",null);a["a"]=h.exports},c990:function(e,a,t){}}]);
//# sourceMappingURL=chunk-1bbb933b.8336d930.js.map