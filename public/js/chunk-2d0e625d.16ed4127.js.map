{"version":3,"sources":["webpack:///./src/pages/articles/admin/liste-all-alerts.vue?fbb6","webpack:///src/pages/articles/admin/liste-all-alerts.vue","webpack:///./src/pages/articles/admin/liste-all-alerts.vue?7950","webpack:///./src/pages/articles/admin/liste-all-alerts.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","is_loading_articles","attrs","is_doing_action","on","$event","$router","push","_v","model","value","callback","$$v","search_text","expression","articles","perPage","currentPage","fields","sortBy","sortDesc","scopedSlots","_u","key","fn","data","domProps","_s","directives","name","rawName","modifiers","doSetCurAlert","rows","action_message","curAlerte","latitude","longitude","staticStyle","lat","lng","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","disableDefaultUi","google","maps","LatLng","staticRenderFns","load","libraries","ascIcon","descIcon","constants","position","currentAlertId","type_agent","sortByFormatted","filterByFormatted","sortable","utilisateur","all_articles","list_categories_articles","computed","length","filter","methods","id","getUserLocalisation","onDone","message","alert","type","title","text","$swal","navigator","geolocation","getCurrentPosition","onSuccess","onError","component"],"mappings":"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","file":"js/chunk-2d0e625d.16ed4127.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"mt-5\"},[_vm._m(0),(!_vm.is_loading_articles)?_c('div',[_c('div',{staticClass:\" \"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"row mb-4 d-flex justify-content-start\"},[_c('div',{staticClass:\"col-md-7 justify-content-start\"},[_c('button',{staticClass:\"btn-icon-text d-none btn btn-primary mb-3 mb-md-0\",attrs:{\"type\":\"button\",\"disabled\":_vm.is_doing_action},on:{\"click\":function($event){return _vm.$router.push('/admin/alertes/nouveau')}}},[_c('i',{staticClass:\"fa fa-plus btn-icon-prepend\"}),_vm._v(\" Nouvelle Alerte \")])]),_c('div',{staticClass:\"col-md-5 d-none\"},[_c('b-form-group',{attrs:{\"label\":\"\",\"label-for\":\"input5\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Rechercher\"},model:{value:(_vm.search_text),callback:function ($$v) {_vm.search_text=$$v},expression:\"search_text\"}})],1)],1)]),_c('div',{staticClass:\"table-responsive\"},[_c('b-table',{attrs:{\"items\":_vm.articles,\"id\":\"table-list\",\"responsive\":\"\",\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage,\"fields\":_vm.fields,\"sort-by\":_vm.sortBy,\"sort-desc\":_vm.sortDesc},on:{\"update:sortBy\":function($event){_vm.sortBy=$event},\"update:sort-by\":function($event){_vm.sortBy=$event},\"update:sortDesc\":function($event){_vm.sortDesc=$event},\"update:sort-desc\":function($event){_vm.sortDesc=$event}},scopedSlots:_vm._u([{key:\"cell(status)\",fn:function(data){return [_c('span',{domProps:{\"innerHTML\":_vm._s(data.value)}})]}},{key:\"cell(action)\",fn:function(data){return [_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('button',{staticClass:\"btn btn-sm d-none btn-outline-primary py-1 mr-1\",attrs:{\"title\":\"Modifier ce article\",\"disabled\":_vm.is_doing_action},on:{\"click\":function () { return _vm.$router.push('/admin/articles/editer/' + data.value); }}},[_c('i',{staticClass:\"fa fa-pencil\"})]),_c('button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modalcarte\",modifiers:{\"modalcarte\":true}}],staticClass:\"btn btn-sm btn-outline-primary p-2\",attrs:{\"title\":\"Voir dans la carte\",\"disabled\":_vm.is_doing_action},on:{\"mouseenter\":function () { return _vm.doSetCurAlert(data.value); }}},[_c('i',{staticClass:\"fa fa-map\"})])])]}},{key:\"cell(profil)\",fn:function(data){return [_c('span',{domProps:{\"innerHTML\":_vm._s(data.value)}})]}}],null,false,1390883858)}),_c('b-pagination',{attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"table-list\",\"align\":\"right\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)])])])]):_c('div',{staticClass:\"mt-5 pt-4\"},[_vm._m(1)]),_c('div',[_c('div',[_c('b-modal',{attrs:{\"id\":\"modalcarte\",\"title\":\"Localisation de l'alerte\",\"size\":\"lg\"}},[(_vm.is_doing_action)?_c('div',[_c('div',{staticClass:\"card mb-4\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"circle-loader\"}),_c('p',{staticClass:\"text-center mt-4\"},[_vm._v(_vm._s(_vm.action_message))])])])]):_c('div',[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('h6',{staticClass:\"card-title\"},[_vm._v(\"Carte\")]),_c('div',{staticClass:\"map-container\"},[_c('p',{staticClass:\"my-4\"},[_vm._v(\" \"+_vm._s(_vm.curAlerte().latitude)+\", \"+_vm._s(_vm.curAlerte().longitude)+\" \")]),_c('GmapMap',{staticStyle:{\"width\":\"100%\",\"height\":\"500px\"},attrs:{\"center\":{lat:_vm.curAlerte().latitude, lng: _vm.curAlerte().longitude},\"zoom\":15,\"options\":{\n                  zoomControl: true,\n                  mapTypeControl: true,\n                  scaleControl: true,\n                  streetViewControl: true,\n                  rotateControl: true,\n                  fullscreenControl: true,\n                  disableDefaultUi: true\n                }}},[_c('GmapMarker',{attrs:{\"position\":_vm.google && new _vm.google.maps.LatLng(_vm.curAlerte().latitude,_vm.curAlerte().longitude),\"clickable\":true,\"draggable\":false}})],1)],1)])])])])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-header\"},[_c('h3',{staticClass:\"page-title\"},[_vm._v(\"Toutes les Alerts\")]),_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb\"},[_c('li',{staticClass:\"breadcrumb-item\"},[_c('a',{attrs:{\"href\":\"javascript:void(0);\"}},[_vm._v(\"Alertes\")])]),_c('li',{staticClass:\"breadcrumb-item active\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\" Mes Alertes \")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"circle-loader\"}),_c('p',{staticClass:\"text-center mt-4\"},[_vm._v(\"Chargement des données en cours\")])])])}]\n\nexport { render, staticRenderFns }","<script>\r\nimport Vue from \"vue\";\r\nimport SortedTablePlugin from \"vue-sorted-table\";\r\nimport functions from \"../../../util/functions.js\";\r\nimport constants from \"../../../util/constants\";\r\nimport * as VueGoogleMaps from 'vue2-google-maps'\r\nimport {gmapApi} from 'vue2-google-maps'\r\nimport { mapState } from \"vuex\";\r\n\r\nVue.use(VueGoogleMaps, {\r\n  load: {\r\n    key: 'AIzaSyAT9uAsuQPTgLew4c2CmAceEeaLXYeHhsk',\r\n    libraries: 'places', \r\n  },\r\n})\r\nVue.use(SortedTablePlugin, {\r\n  ascIcon: '<i class=\"mdi mdi-arrow-down\"></i>',\r\n  descIcon: '<i class=\"mdi mdi-arrow-up\"></i>',\r\n});\r\n\r\nexport default {\r\n  data: function () {\r\n    return {\r\n      constants,\r\n      position : { latitude : 10, longitude : 10},\r\n      currentAlertId :  -1,\r\n      type_agent : \"\",\r\n\r\n      is_doing_action: false,\r\n      action_message: \"En cours\",\r\n\r\n      sortBy: \"Nom & prénom\",\r\n      perPage: 10,\r\n      currentPage: 1,\r\n      sortDesc: false,\r\n      sortByFormatted: true,\r\n      filterByFormatted: true,\r\n      sortable: true,\r\n      is_loading_articles: true,\r\n      utilisateur : {},\r\n      \r\n      fields: [\r\n        { key: \"n\", sortable: false },\r\n        { key: \"action\", sortable: true },\r\n        { key: \"date\", sortable: true },\r\n        { key: \"type_alerte\", sortable: true },\r\n        { key: \"coordonnes\", sortable: true },\r\n        //{ key: \"localisation\", sortable: true },\r\n        { key: \"observation\", sortable: true },\r\n        // { key: \"prix_promotionnel\", sortable: true },\r\n        // { key: \"est_disponible\", sortable: true },\r\n        // { key: \"est_un_nouvel_article\", sortable: true },\r\n        // { key: \"description\", sortable: true }, \r\n        // { key: \"collection\", sortable: true }, \r\n      ],\r\n      all_articles: [],\r\n      list_categories_articles: [],\r\n      search_text: \"\",\r\n    };\r\n  },\r\n  \r\n  async created() { \r\n    try {\r\n      this.utilisateur = JSON.parse(sessionStorage.getItem('utilisateur'));\r\n    } catch(e) {\r\n      this.utilisateur = {id : -1}\r\n    }\r\n    this.doLoadAlerts({})\r\n  },\r\n  computed: {\r\n    google: gmapApi,\r\n    ...mapState([\r\n      \"is_connected\",\r\n      \"nom_utilisateur\",\r\n      \"id_utilisateur\",\r\n      \"est_admin\",\r\n    ]),\r\n    rows() {\r\n      return this.all_articles.length;\r\n    },\r\n    articles() {\r\n      return this.all_articles.filter((article) => {\r\n        if (this.search_text == \"\") {\r\n          return this.all_articles;\r\n        }\r\n        let attrs = [\"date\", \"type_alerte\", \"observation\"];\r\n        for (let attr of attrs) {\r\n          if (\r\n            article[attr] != undefined &&\r\n            article[attr]\r\n              .toLowerCase()\r\n              .toLowerCase()\r\n              .includes(this.search_text.toLowerCase())\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n  },\r\n  methods: {\r\n    ...functions,\r\n    async doLoadAlerts () {\r\n      this.is_loading_articles = true;\r\n      let url = this.constants.api_url + \"/serviceAlerts/\" + this.utilisateur.service_id;\r\n      let response = await fetch(url, {\r\n        method: \"get\",\r\n        cache: \"no-cache\",\r\n        // headers  : {\r\n        //   \"Content-Type\" : \"application/json\"\r\n        // },\r\n        // body : JSON.stringify({\r\n        //   user_id : this.id_utilisateur,\r\n        //   user_lat : position.latitude,\r\n        //   user_long : position.longitude, \r\n        // }),\r\n        //credentials: \"include\",\r\n      });\r\n      let data = await response.json();\r\n      if (data.alerts) {\r\n        let listTypes = [ {libelle : \"Alerte Police\", id : 1}, \r\n          {libelle : \"Police Incendie\" , id : 2}, \r\n          {libelle : \"Service Social\", id : 3},\r\n          {libelle : \"Croix rouge\", id : 4},\r\n        ]\r\n        let pos = 0;\r\n        this.all_articles = data.alerts.map((article) => {\r\n          pos++;\r\n          let n = pos;\r\n          let type_alerte = listTypes.find(tt => tt.id == article.service_id)\r\n          if(type_alerte)\r\n            type_alerte = type_alerte.libelle\r\n          else\r\n            type_alerte = article.service_id\r\n          \r\n          return {\r\n              ...article,\r\n              n,\r\n              date : functions.obtenirDateEtHeureEnFrancais(article.created_at),\r\n              type_alerte : type_alerte,\r\n              coordonnes : '( ' + article.latitude + ',' +  article.longitude + \" )\",\r\n              observation :  'non sécourue',\r\n              localisation : article.Ville + ', ' + article.Commune + ', ' + article.Quartier ,\r\n\r\n              // prix_unitaire : article.prix_unitaire + \" $\",\r\n              // est_disponible : article.est_disponible == 1 ? 'Oui' : 'Non',\r\n              // est_en_promotion : article.est_en_promotion == 1 ? 'Oui' : \"Non\",\r\n              // collection : article.libelle_collection,\r\n              // est_un_nouvel_article : article.est_nouveau == 1 ? \"Oui\": 'Non',\r\n              action: article.id,\r\n            };\r\n        });\r\n\r\n        \r\n      } else {\r\n        this.$swal({\r\n          type: \"error\",\r\n          title: \"Une erreur est survenue\",\r\n          text: \"Status : \" + data.status + \"\\nMessage : \" + data.message,\r\n          //footer: '<a href>Why do I have this issue?</a>'\r\n        });\r\n      }\r\n      this.is_loading_articles = false;\r\n    },\r\n    curAlerte() {\r\n      let al = this.all_articles.find(\r\n        (c) => c.id == this.currentAlertId\r\n      );\r\n      if(!al)\r\n        return {longitude : 10, latitude : 10}\r\n      return {\r\n        ...al,\r\n        longitude : parseFloat(al.longitude),\r\n        latitude : parseFloat(al.latitude)\r\n      }\r\n    },\r\n    doSetCurAlert(id)\r\n    {\r\n      this.currentAlertId = id\r\n      // alert(id)\r\n    },\r\n    async doDeleteFaq(id_alerte) {\r\n      let res = await this.$swal({\r\n        title: \"Supprimer ?\",\r\n        text: \"Voulez-vous vraiment supprimer cet alerte ?\",\r\n        type: \"question\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#d33\",\r\n        cancelButtonColor: \"#3085d6\",\r\n        confirmButtonText: \"Supprimer\",\r\n        cancelButtonText: \"Annuler\",\r\n      });\r\n      if (!res.value) {\r\n        return;\r\n      }\r\n      this.action_message = \"Suppression  en cours\";\r\n      this.is_doing_action = true;\r\n      let url = this.constants.api_url + \"/get_my_alerts/\" + id_alerte;\r\n      let response = null;\r\n      try {\r\n        response = await fetch(url, {\r\n          method: \"delete\",\r\n          cache: \"no-cache\",\r\n          body: JSON.stringify(this.article),\r\n          credentials: \"include\",\r\n        });\r\n      } catch (e) {\r\n        this.$swal({\r\n          type: \"error\",\r\n          title: \"La connexion au serveur a échoué\",\r\n          text: e.message,\r\n          //footer: '<a href>Why do I have this issue?</a>'\r\n        });\r\n        return;\r\n      }\r\n      let data = await response.json();\r\n      if (data.status == \"SUCCESS\") {\r\n        this.all_articles = this.all_articles.filter((article) => article.id != id_alerte);\r\n        this.$swal({\r\n          type: \"success\",\r\n          title: \"Effectué\",\r\n          text: \"La article a été supprimée avec succès. \",\r\n          //footer: '<a href>Why do I have this issue?</a>'\r\n        });\r\n      }  else {\r\n        this.$swal({\r\n          type: \"error\",\r\n          title: \"Une erreur est survenue\",\r\n          text: \"Status : \" + data.status + \"<br/>Message : \" + data.message,\r\n          //footer: '<a href>Why do I have this issue?</a>'\r\n        });\r\n      }\r\n      this.is_doing_action = false;\r\n    },\r\n    getUserLocalisation(onDone) {\r\n      this.action_message = \"Localisation en cours\";\r\n      // this.is_doing_action = true;\r\n      this.is_loading_articles = true;\r\n      \r\n      let onSuccess = (position) => {\r\n        let latitude = position.coords.latitude\r\n        let longitude = position.coords.longitude\r\n        //alert(\"Latitude : \" + latitude +  \".\\n Longitude : \" + longitude)\r\n        this.is_loading_articles = false;\r\n        if(onDone) {\r\n          onDone({latitude, longitude})\r\n        }\r\n      }\r\n      let onError = (error) => {\r\n        this.is_loading_articles = false;\r\n        let message = \"\";\r\n        if(error.code == error.PERMISSION_DENIED) {\r\n          message = \"Autorisation refusée\"\r\n        } else if(error.code == error.POSITION_UNAVAILABLE) {\r\n          message = \"Les informations de localisation sont indisponibles\"\r\n        } else if(error.code == error.TIMEOUT) {\r\n          message = \"La demande de localisation a expirée\"\r\n        } else if(error.code == error.UNKNOWN_ERROR) {\r\n          message = \"Une erreur inconnue s'est produite\"\r\n        }\r\n        if(message!=\"\") {\r\n          alert(message)\r\n          this.$swal({\r\n            type: \"error\",\r\n            title: \"Erreur\",\r\n            text: message,\r\n            //footer: '<a href>Why do I have this issue?</a>'\r\n          });\r\n        }\r\n      }\r\n      if(navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(onSuccess, onError)\r\n      } else {\r\n        alert(\"La géolocalisation est désactivée. Veuillez la réactiver\")\r\n        this.$swal({\r\n          type: \"error\",\r\n          title: \"Géolocalisation désactivée\",\r\n          text: \"La géolocalisation est désactivée. Veuillez la réactiver\",\r\n          //footer: '<a href>Why do I have this issue?</a>'\r\n        });\r\n        return ;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <section class=\"mt-5\">\r\n    <div class=\"page-header\">\r\n      <h3 class=\"page-title\">Toutes les Alerts</h3>\r\n      <nav aria-label=\"breadcrumb\">\r\n        <ol class=\"breadcrumb\">\r\n          <li class=\"breadcrumb-item\">\r\n            <a href=\"javascript:void(0);\">Alertes</a>\r\n          </li>\r\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">\r\n            Mes Alertes\r\n          </li>\r\n        </ol>\r\n      </nav>\r\n    </div>\r\n    <div v-if=\"!is_loading_articles\">\r\n      \r\n      <div class=\" \">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <!-- <h4 class=\"card-title mb-5\">Liste de Faqs</h4> -->\r\n            <div class=\"row mb-4 d-flex justify-content-start\">\r\n              <div class=\"col-md-7 justify-content-start\">\r\n                <button\r\n                  type=\"button\"\r\n                  @click=\"$router.push('/admin/alertes/nouveau')\"\r\n                  :disabled=\"is_doing_action\"\r\n                  class=\"btn-icon-text d-none btn btn-primary mb-3 mb-md-0\"\r\n                >\r\n                  <i class=\"fa fa-plus btn-icon-prepend\"></i>\r\n                  Nouvelle Alerte\r\n                </button>\r\n              </div>\r\n              <div class=\"col-md-5 d-none\">\r\n                <b-form-group label=\"\" label-for=\"input5\">\r\n                  <b-form-input\r\n                    type=\"text\"\r\n                    v-model=\"search_text\"\r\n                    placeholder=\"Rechercher\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"table-responsive\">\r\n              <b-table\r\n                :items=\"articles\"\r\n                id=\"table-list\"\r\n                responsive\r\n                :per-page=\"perPage\"\r\n                :current-page=\"currentPage\"\r\n                :fields=\"fields\"\r\n                :sort-by.sync=\"sortBy\"\r\n                :sort-desc.sync=\"sortDesc\"\r\n              >\r\n                <template v-slot:cell(status)=\"data\">\r\n                  <span v-html=\"data.value\"></span>\r\n                </template>\r\n                <template v-slot:cell(action)=\"data\">\r\n                  <div class=\"d-flex justify-content-center\" \r\n                  \r\n                  >\r\n                    <button\r\n                      class=\"btn btn-sm d-none btn-outline-primary py-1 mr-1\"\r\n                      title=\"Modifier ce article\"\r\n                      @click=\"\r\n                        () => $router.push('/admin/articles/editer/' + data.value)\r\n                      \"\r\n                      :disabled=\"is_doing_action\"\r\n                    >\r\n                      <i class=\"fa fa-pencil\"></i>\r\n                    </button>\r\n                    <button \r\n                      class=\"btn btn-sm btn-outline-primary p-2\"\r\n                      title=\"Voir dans la carte\"\r\n                      :disabled=\"is_doing_action\"\r\n                      @mouseenter=\"() => doSetCurAlert(data.value)\"\r\n\r\n                      v-b-modal.modalcarte\r\n                    >\r\n                      <i class=\"fa fa-map\"></i>\r\n                    </button>\r\n                  </div>\r\n                </template>\r\n                <template v-slot:cell(profil)=\"data\">\r\n                  <span v-html=\"data.value\"></span>\r\n                </template>\r\n              </b-table>\r\n              <b-pagination\r\n                v-model=\"currentPage\"\r\n                :total-rows=\"rows\"\r\n                :per-page=\"perPage\"\r\n                aria-controls=\"table-list\"\r\n                align=\"right\"\r\n              >\r\n              </b-pagination>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n \r\n    </div>\r\n    <div class=\"mt-5 pt-4\" v-else>\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"circle-loader\"></div>\r\n          <p class=\"text-center mt-4\">Chargement des données en cours</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <div>\r\n        <!-- Le modale de détails de commande -->\r\n        <b-modal id=\"modalcarte\" title=\"Localisation de l'alerte\" size=\"lg\">\r\n          <div v-if=\"is_doing_action\">\r\n            <div class=\"card mb-4\">\r\n              <div class=\"card-body\">\r\n                <div class=\"circle-loader\"></div>\r\n                <p class=\"text-center mt-4\">{{ action_message }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <div class=\"card\">\r\n              <div class=\"card-body\">\r\n                <h6 class=\"card-title\">Carte</h6>\r\n                <div class=\"map-container\">\r\n                  <p class=\"my-4\"> {{curAlerte().latitude}}, {{curAlerte().longitude}} </p>\r\n                  <GmapMap\r\n                  :center=\"{lat:curAlerte().latitude, lng: curAlerte().longitude}\"\r\n                  :zoom=\"15\"\r\n                  :options=\"{\r\n                    zoomControl: true,\r\n                    mapTypeControl: true,\r\n                    scaleControl: true,\r\n                    streetViewControl: true,\r\n                    rotateControl: true,\r\n                    fullscreenControl: true,\r\n                    disableDefaultUi: true\r\n                  }\"\r\n\r\n                  style=\"width: 100%; height: 500px\"\r\n                >\r\n                <GmapMarker \r\n                  :position=\"google && new google.maps.LatLng(curAlerte().latitude,curAlerte().longitude)\"\r\n                  :clickable=\"true\"\r\n                  :draggable=\"false\" \r\n                  \r\n                />\r\n                </GmapMap>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </b-modal>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./liste-all-alerts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./liste-all-alerts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./liste-all-alerts.vue?vue&type=template&id=0b20fd92&\"\nimport script from \"./liste-all-alerts.vue?vue&type=script&lang=js&\"\nexport * from \"./liste-all-alerts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}